function g(...o){}function f(...o){}async function y(o,i,d=3,p=500){let s=0,t=p,a;for(;s<=d;){try{const e=await fetch(o,i),{status:n,ok:c}=e,r=await e.text().catch(()=>"");let l=null;if(r)try{l=JSON.parse(r)}catch{l=null}return c?{ok:!0,status:n,data:l}:{ok:!1,status:n,data:l,error:r}}catch(e){if(a=e,s===d)break;g(`Retrying request to ${o} with method ${i.method||"GET"} (${d-s} attempts left). Error: ${a.message}`,a),await new Promise(n=>setTimeout(n,t)),t*=2}s+=1}throw f(`Max retries reached for ${o} with method ${i.method||"GET"}:`,a),a}function m(o){const i=document.createElement("div");i.className="nuclen-error-toast",i.textContent=o,document.body.appendChild(i),setTimeout(()=>i.remove(),5e3),}(function(){if(typeof window.nePointerData>"u")return;const{pointers:o,ajaxurl:i,nonce:d}=window.nePointerData;if(!Array.isArray(o)||!o.length)return;let p=0;function s(){if(p>=o.length)return;const t=o[p],a=document.querySelector(t.target);if(!a){p++,s();return}const e=document.createElement("div");e.className="wp-pointer pointer-"+t.position.edge,e.style.position="absolute",e.innerHTML='<div class="wp-pointer-content"><h3>'+t.title+"</h3><p>"+t.content+'</p><a class="close" href="#">Dismiss</a></div>',document.body.appendChild(e);const n=a.getBoundingClientRect();let c=window.scrollY+n.top,r=window.scrollX+n.left;switch(t.position.edge){case"top":c-=e.offsetHeight;break;case"bottom":c+=n.height;break;case"left":r-=e.offsetWidth;break;case"right":r+=n.width;break}t.position.align==="center"?t.position.edge==="top"||t.position.edge==="bottom"?r+=(n.width-e.offsetWidth)/2:c+=(n.height-e.offsetHeight)/2:(t.position.align==="right"||t.position.align==="bottom")&&(t.position.edge==="top"||t.position.edge==="bottom"?r+=n.width-e.offsetWidth:c+=n.height-e.offsetHeight),e.style.top=Math.max(c,0)+"px",e.style.left=Math.max(r,0)+"px";const l=e.querySelector(".close");l&&l.addEventListener("click",function(w){w.preventDefault();const u=new URLSearchParams({action:"nuclen_dismiss_pointer",pointer:t.id});d&&u.append("nonce",d),(async()=>{try{const h=await y(i,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u.toString()});h.ok||(f("Failed to dismiss pointer:",h.error),m("Failed to dismiss pointer."))}catch(h){f("Error dismissing pointer:",h),m("Network error while dismissing pointer.")}e.remove(),p++,s()})()})}document.addEventListener("DOMContentLoaded",s)})();
