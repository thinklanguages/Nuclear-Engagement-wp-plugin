{"version":3,"mappings":"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","names":["shuffle","arr","a","i","j","isValidEmail","email","escapeHtml","str","c","storeOptinLocally","name","url","ctx","res","logger.error","err","submitToWebhook","updateProgress","progBar","currIdx","total","renderQuestion","questions","state","ui","checkAnswer","qContainer","aContainer","explContainer","nextBtn","q","shuffled","ans","idx","correctIdx","handler","el","origIdx","clickListener","keyListener","e","initQuiz","quizContainer","finalContainer","maxQuestions","maxAnswers","optin","_a","nextBtnClickHandler","showNext","cleanup","shuffledIdx","btns","finalCb","renderFinal","__vitePreload","renderOptinBeforeResultsFlow"],"ignoreList":[],"sources":["../../../src/front/ts/nuclen-quiz-utils.ts","../../../src/front/ts/nuclen-quiz-progress.ts","../../../src/front/ts/nuclen-quiz-question.ts","../../../src/front/ts/nuclen-quiz-main.ts"],"sourcesContent":["// ─────────────────────────────────────────────────────────────\n// File: src/front/ts/nuclen-quiz-utils.ts\n// -----------------------------------------------------------------------------\nimport type { OptinContext } from './nuclen-quiz-types';\nimport * as logger from './logger';\n\nexport function shuffle<T>(arr: T[]): T[] {\n\tconst a = [...arr];\n\tfor (let i = a.length - 1; i > 0; i--) {\n\t\tconst j = Math.floor(Math.random() * (i + 1));\n\t\t[a[i], a[j]] = [a[j], a[i]];\n\t}\n\treturn a;\n}\n\nexport const isValidEmail = (email: string): boolean => /.+@.+\\..+/.test(email);\n\nexport const escapeHtml = (str: string): string =>\n\tstr.replace(/[&<>\"']/g, (c) =>\n\t\t({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#039;' }[c] || c),\n\t);\n\nexport const storeOptinLocally = async (\n\tname: string,\n\temail: string,\n\turl: string,\n\tctx: OptinContext\n): Promise<void> => {\n\tif (!ctx.ajaxUrl || !ctx.ajaxNonce) return;\n\ttry {\n\t\tconst res = await fetch(ctx.ajaxUrl, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/x-www-form-urlencoded' },\n\t\t\tbody: new URLSearchParams({\n\t\t\t\taction: 'nuclen_save_optin',\n\t\t\t\tnonce: ctx.ajaxNonce,\n\t\t\t\tname,\n\t\t\t\temail,\n\t\t\t\turl,\n\t\t\t}),\n\t\t});\n\t\tif (!res.ok) {\n\t\t\tlogger.error('[NE] Local opt-in failed', res.status);\n\t\t}\n\t} catch (err) {\n\t\tlogger.error('[NE] Local opt-in network error', err);\n\t}\n};\n\nexport const submitToWebhook = async (\n\tname: string,\n\temail: string,\n\tctx: OptinContext\n): Promise<void> => {\n\tif (!ctx.webhook) return;\n\ttry {\n\t\tconst res = await fetch(ctx.webhook, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tbody: JSON.stringify({ name, email }),\n\t\t});\n\t\tif (!res.ok) {\n\t\t\tlogger.error('[NE] Webhook responded with', res.status);\n\t\t\tthrow new Error(String(res.status));\n\t\t}\n\t} catch (err) {\n\t\tlogger.error('[NE] Webhook request error', err);\n\t\tthrow err;\n\t}\n};\n","// src/front/ts/nuclen-quiz-progress.ts\n\nexport function updateProgress(\n\tprogBar: HTMLElement,\n\tcurrIdx: number,\n\ttotal: number,\n): void {\n\tprogBar.style.width = `${((currIdx + 1) / total) * 100}%`;\n}\n","// src/front/ts/nuclen-quiz-question.ts\n\nimport type { QuizQuestion } from './nuclen-quiz-types';\nimport { shuffle, escapeHtml } from './nuclen-quiz-utils';\nimport type { QuizUIRefs, QuizState } from './nuclen-quiz-results';\nimport { updateProgress } from './nuclen-quiz-progress';\n\nexport function renderQuestion(\n\tquestions: QuizQuestion[],\n\tstate: QuizState,\n\tui: QuizUIRefs,\n\tcheckAnswer: (origIdx: number, shuffledIdx: number, correctIdx: number) => void,\n): void {\n\tconst { qContainer, aContainer, explContainer, nextBtn, progBar } = ui;\n\tconst q = questions[state.currIdx];\n\n\tqContainer.innerHTML = `\n\t<div id=\"nuclen-quiz-question-number\" aria-live=\"polite\" aria-atomic=\"true\">\n\t\t${state.currIdx + 1}/${questions.length}\n\t</div>\n\t<div class=\"nuclen-quiz-title\" role=\"heading\" aria-level=\"2\">${escapeHtml(q.question)}</div>`;\n\n\tconst shuffled = shuffle(\n\t\tq.answers.map((ans, idx) => ({ ans, idx })).filter((a) => a.ans.trim()),\n\t);\n\n\taContainer.innerHTML = shuffled\n\t\t.map(\n\t\t\t(a, i) => `\n\t\t<button\n\t\t\tclass=\"nuclen-quiz-answer-button nuclen-quiz-possible-answer\"\n\t\t\tdata-orig-idx=\"${a.idx}\"\n\t\t\tdata-testid=\"quiz-answer\"\n\t\t\ttabindex=\"0\"\n\t\t\taria-label=\"Answer ${i + 1}: ${escapeHtml(a.ans)}\"\n\t\t>${escapeHtml(a.ans)}</button>`,\n\t\t)\n\t\t.join('');\n\n\tconst correctIdx = shuffled.findIndex((a) => a.idx === 0);\n\n\t/* reset */\n\texplContainer.innerHTML = '';\n\texplContainer.classList.add('nuclen-quiz-hidden');\n\tnextBtn.classList.add('nuclen-quiz-hidden');\n\tupdateProgress(progBar, state.currIdx, questions.length);\n\n\t/* one-shot answer handler */\n\tconst handler = (el: HTMLElement) => {\n\t\tconst origIdx = parseInt(el.getAttribute('data-orig-idx') || '0', 10);\n\t\tcheckAnswer(origIdx, shuffled.findIndex((a) => a.idx === origIdx), correctIdx);\n\t\taContainer.removeEventListener('click', clickListener);\n\t\taContainer.removeEventListener('keydown', keyListener);\n\t};\n\n\tconst clickListener = (e: Event) => {\n\t\tconst el = e.target as HTMLElement;\n\t\tif (!el.matches('button.nuclen-quiz-answer-button')) return;\n\t\thandler(el);\n\t};\n\tconst keyListener = (e: KeyboardEvent) => {\n\t\tconst el = e.target as HTMLElement;\n\t\tif (!el.matches('button.nuclen-quiz-answer-button')) return;\n\t\tif (e.key === 'Enter' || e.key === ' ') {\n\t\t\te.preventDefault();\n\t\t\thandler(el);\n\t\t}\n\t};\n\n\taContainer.addEventListener('click', clickListener);\n\taContainer.addEventListener('keydown', keyListener);\n}\n","// ─────────────────────────────────────────────────────────────\n// File: src/front/ts/nuclen-quiz-main.ts\n// FULL content – fixes: enable flag, skip-link, next-button hiding\n// -----------------------------------------------------------------------------\n//\n// · Opt-in form now renders ONLY when Enable Opt-In is “on”.\n// · Skip link appears when opt-in is before-results & not mandatory.\n// · “Next” button is hidden whenever the opt-in is visible (both flows).\n//\n// -----------------------------------------------------------------------------\n\nimport type {\n\tQuizQuestion,\n\tOptinContext,\n\tNuclenSettings as NuclenSettingsType,\n} from './nuclen-quiz-types';\nimport { escapeHtml } from './nuclen-quiz-utils';\nimport type { QuizUIRefs, QuizState } from './nuclen-quiz-results';\nimport * as logger from './logger';\nimport { renderQuestion } from './nuclen-quiz-question';\n\n/* Globals injected by wp_localize_script */\ndeclare const postQuizData: QuizQuestion[];\ndeclare const NuclenSettings: NuclenSettingsType;\n\ndeclare const NuclenOptinAjax: { url: string; nonce: string };\n\n\tdeclare function gtag(...args: unknown[]): void;\n\n/* ─────────────────────────────────────────────────────────────\n\t Entry\n\t────────────────────────────────────────────────────────────── */\nexport function initQuiz(): void {\n\t/* DOM refs (fail-fast if markup missing) */\n\tconst quizContainer  = document.getElementById('nuclen-quiz-container');\n\tconst qContainer     = document.getElementById('nuclen-quiz-question-container');\n\tconst aContainer     = document.getElementById('nuclen-quiz-answers-container');\n\tconst progBar        = document.getElementById('nuclen-quiz-progress-bar');\n\tconst finalContainer = document.getElementById('nuclen-quiz-final-result-container');\n\tconst nextBtn        = document.getElementById('nuclen-quiz-next-button');\n\tconst explContainer  = document.getElementById('nuclen-quiz-explanation-container');\n\tif (\n\t\t!quizContainer || !qContainer || !aContainer || !progBar ||\n\t\t!finalContainer || !nextBtn || !explContainer\n\t) {\n\t\tlogger.warn('[NE] Quiz markup missing — init aborted.');\n\t\treturn;\n\t}\n\n\t/* SETTINGS & OPT-IN CONTEXT */\n\tconst maxQuestions = NuclenSettings?.questions_per_quiz ?? 10;\n\tconst maxAnswers   = NuclenSettings?.answers_per_question ?? 4;\n\n\tconst optin: OptinContext = {\n\t\tposition: (window.NuclenOptinPosition as 'with_results' | 'before_results') ?? 'with_results',\n\t\tmandatory: Boolean(window.NuclenOptinMandatory),\n\t\tpromptText: window.NuclenOptinPromptText ?? '',\n\t\tsubmitLabel: window.NuclenOptinButtonText ?? '',\n\t\tenabled: Boolean(window.NuclenOptinEnabled),\n\t\twebhook: window.NuclenOptinWebhook ?? '',\n\t\tajaxUrl: NuclenOptinAjax?.url ?? '',\n\t\tajaxNonce: NuclenOptinAjax?.nonce ?? '',\n\t};\n\n\t/* PREPARE QUESTIONS */\n\t// Check if postQuizData exists and is an array\n\tif (typeof postQuizData === 'undefined' || !Array.isArray(postQuizData)) {\n\t\tlogger.warn('[NE] No quiz data available — quiz init aborted.');\n\t\treturn;\n\t}\n\t\n\tconst questions: QuizQuestion[] = postQuizData\n\t\t.filter((q) => q.question.trim() && q.answers[0]?.trim())\n\t\t.slice(0, maxQuestions)\n\t\t.map((q) => ({ ...q, answers: q.answers.slice(0, maxAnswers) }));\n\n\tconst ui: QuizUIRefs = {\n\t\tqContainer: qContainer!,\n\t\taContainer: aContainer!,\n\t\texplContainer: explContainer!,\n\t\tnextBtn: nextBtn!,\n\t\tfinalContainer: finalContainer!,\n\t\tprogBar: progBar!,\n\t};\n\n\tconst state: QuizState = { currIdx: 0, score: 0, userAnswers: [] };\n\t\n\t// Store event listener reference for cleanup\n\tconst nextBtnClickHandler = showNext;\n\n\t/* Start */\n\tnextBtn.addEventListener('click', nextBtnClickHandler);\n\trenderQuestion(questions, state, ui, checkAnswer);\n\t\n\t// Cleanup function for page navigation\n\tconst cleanup = () => {\n\t\tnextBtn.removeEventListener('click', nextBtnClickHandler);\n\t\t// Clean up global functions\n\t\tif (window.nuclearEngagementShowQuizQuestionDetails) {\n\t\t\tdelete window.nuclearEngagementShowQuizQuestionDetails;\n\t\t}\n\t\tif (window.nuclearEngagementRetakeQuiz) {\n\t\t\tdelete window.nuclearEngagementRetakeQuiz;\n\t\t}\n\t};\n\t\n\t// Listen for page navigation to cleanup\n\tif ('onpagehide' in window) {\n\t\twindow.addEventListener('pagehide', cleanup);\n\t} else {\n\t\t(window as Window).addEventListener('beforeunload', cleanup);\n\t}\n\n\n\t/* ───────────────────────────────────────────────────────────\n\t\t Quiz flow helpers\n\t─────────────────────────────────────────────────────────── */\n\n\tfunction checkAnswer(origIdx: number, shuffledIdx: number, correctIdx: number): void {\n\t\tif (origIdx === 0) state.score++;\n\t\tstate.userAnswers.push(origIdx);\n\n\t\tconst btns = aContainer!.getElementsByTagName('button');\n\t\tfor (let i = 0; i < btns.length; i++) {\n\t\t\tbtns[i].classList.remove('nuclen-quiz-possible-answer');\n\t\t\tif (i === correctIdx) {\n\t\t\t\tbtns[i].classList.add('nuclen-quiz-answer-correct', 'nuclen-quiz-pulse');\n\t\t\t} else if (i === shuffledIdx) {\n\t\t\t\tbtns[i].classList.add('nuclen-quiz-answer-wrong');\n\t\t\t} else {\n\t\t\t\tbtns[i].classList.add('nuclen-quiz-answer-not-selected');\n\t\t\t}\n\t\t\tbtns[i].disabled = true;\n\t\t}\n\n\t\texplContainer!.innerHTML = `<p>${escapeHtml(\n\t\t\tquestions[state.currIdx].explanation,\n\t\t)}</p>`;\n\t\texplContainer!.classList.remove('nuclen-quiz-hidden');\n\t\tnextBtn!.classList.remove('nuclen-quiz-hidden');\n\n\t\tif (typeof gtag === 'function') {\n\t\t\tif (state.currIdx === 0) gtag('event', 'nuclen_quiz_start');\n\t\t\tgtag('event', 'nuclen_quiz_answer');\n\t\t}\n\t}\n\n\tfunction showNext(): void {\n\t\tstate.currIdx++;\n\t\tif (state.currIdx < questions.length) {\n\t\t\trenderQuestion(questions, state, ui, checkAnswer);\n\t\t\treturn quizContainer!.scrollIntoView();\n\t\t}\n\n\t\tconst finalCb = async () => {\n\t\t\tconst { renderFinal } = await import('./nuclen-quiz-results');\n\t\t\trenderFinal(ui, optin, questions, state, () =>\n\t\t\t\trenderQuestion(questions, state, ui, checkAnswer),\n\t\t\t);\n\t\t};\n\n\t\tif (optin.enabled && optin.position === 'before_results') {\n\t\t\timport('./nuclen-quiz-results').then(({ renderOptinBeforeResultsFlow }) => {\n\t\t\t\trenderOptinBeforeResultsFlow(ui, optin, finalCb);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tfinalCb();\n\t}\n\n}\n"],"file":"front/js/nuclen-nuclen-quiz-main-tW-K_tnt.js"}