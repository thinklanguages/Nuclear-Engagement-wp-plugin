{"version":3,"file":"nuclen-toc-front.js","sources":["../../../../../src/modules/toc/ts/sticky-toc.ts","../../../../../src/modules/toc/ts/toc-toggle.ts","../../../../../src/modules/toc/ts/toc-click-close.ts","../../../../../src/modules/toc/ts/toc-scroll-spy.ts","../../../../../src/modules/toc/ts/toc-analytics.ts","../../../../../src/modules/toc/ts/toc-interactions.ts","../../../../../src/modules/toc/ts/nuclen-toc-front.ts"],"sourcesContent":["// modules/toc/ts/sticky-toc.ts\r\n\r\n/**\r\n * Sticky Table of Contents behaviour.\r\n */\r\nfunction applyStickyStyles(\r\n\twrapper: HTMLElement,\r\n\ttoc: HTMLElement,\r\n\tplaceholder: HTMLElement,\r\n\tleft: number,\r\n\twidth: number,\r\n\theight: number,\r\n\theaderOffset: number,\r\n\trectHeight: number,\r\n): void {\r\n\twrapper.classList.add('nuclen-toc-stuck');\r\n\twrapper.style.position = 'fixed';\r\n\twrapper.style.top = `${headerOffset}px`;\r\n\twrapper.style.left = `${left}px`;\r\n\twrapper.style.width = `${width}px`;\r\n\twrapper.style.maxHeight = `${height}px`;\r\n\twrapper.style.overflow = 'visible';\r\n\r\n\ttoc.style.maxHeight = `${height}px`;\r\n\ttoc.style.overflow = 'auto';\r\n\r\n\tplaceholder.style.display = 'block';\r\n\tplaceholder.style.width = `${width}px`;\r\n\tplaceholder.style.height = `${rectHeight}px`;\r\n}\r\n\r\nfunction clearStickyStyles(\r\n\twrapper: HTMLElement,\r\n\ttoc: HTMLElement,\r\n\tplaceholder: HTMLElement,\r\n): void {\r\n\twrapper.classList.remove('nuclen-toc-stuck');\r\n\twrapper.style.cssText = 'transition: top 0.25s ease-out;';\r\n\r\n\ttoc.style.maxHeight = '';\r\n\ttoc.style.overflow = '';\r\n\r\n\tplaceholder.style.display = 'none';\r\n}\r\n\r\nexport function initStickyToc(): void {\r\n\tconst wrappers = document.querySelectorAll<HTMLElement>('.nuclen-toc-sticky');\r\n\tif (!wrappers.length) {\r\n\t\treturn;\r\n\t}\r\n\r\n\twrappers.forEach((wrapper) => {\r\n\t\tconst toc = wrapper.querySelector<HTMLElement>('.nuclen-toc');\r\n\t\tif (!toc) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst headerOffset = parseInt(wrapper.dataset.offsetY || '20', 10);\r\n\t\tconst sideMargin = parseInt(wrapper.dataset.offsetX || '20', 10);\r\n\t\tconst showContent = wrapper.dataset.showContent;\r\n\t\tif (showContent === 'false') {\r\n\t\t\ttoc.style.display = 'none';\r\n\t\t}\r\n\r\n\t\tlet rect = wrapper.getBoundingClientRect();\r\n\t\tconst originalTop = rect.top + window.pageYOffset;\r\n\t\tlet originalLeft = rect.left;\r\n\t\tlet originalWidth = rect.width;\r\n\t\tlet isStuck = false;\r\n\t\tlet raf: number | null = null;\r\n\r\n\t\tconst dataMax = parseInt(wrapper.dataset.maxWidth || '0', 10); // 0 ⇒ unlimited.\r\n\r\n\t\tconst ph = document.createElement('div');\r\n\t\tph.className = 'nuclen-toc-placeholder';\r\n\t\tph.style.height = `${rect.height}px`;\r\n\t\tph.style.width = `${rect.width}px`;\r\n\t\twrapper.insertAdjacentElement('afterend', ph);\r\n\t\tph.style.display = 'none';\r\n\r\n\t\twrapper.style.transition = 'top 0.25s ease-out';\r\n\r\n\t\tconst calcLeft = (w: number): number => {\r\n\t\t\tconst container = document.querySelector<HTMLElement>(\r\n\t\t\t\t'.entry-content, .post, .content-area, .site-main, main',\r\n\t\t\t);\r\n\t\t\tconst contLeft = container ? container.getBoundingClientRect().left : originalLeft;\r\n\t\t\tconst min = sideMargin;\r\n\t\t\tconst max = window.innerWidth - w - sideMargin;\r\n\t\t\treturn Math.max(min, Math.min(contLeft, max));\r\n\t\t};\r\n\t\tconst availHeight = (): number => window.innerHeight - headerOffset * 2;\r\n\r\n\t\ttoc.style.position = 'relative';\r\n\t\ttoc.style.width = '100%';\r\n\r\n\t\tconst setStuck = (stick: boolean): void => {\r\n\t\t\tif (stick === isStuck) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tisStuck = stick;\r\n\r\n\t\t\tif (isStuck) {\r\n\t\t\t\tconst h = availHeight();\r\n\t\t\t\tconst w = dataMax > 0 ? Math.min(originalWidth, dataMax) : originalWidth;\r\n\t\t\t\tapplyStickyStyles(\r\n\t\t\t\t\twrapper,\r\n\t\t\t\t\ttoc,\r\n\t\t\t\t\tph,\r\n\t\t\t\t\tcalcLeft(w),\r\n\t\t\t\t\tw,\r\n\t\t\t\t\th,\r\n\t\t\t\t\theaderOffset,\r\n\t\t\t\t\trect.height,\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tclearStickyStyles(wrapper, toc, ph);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst onScroll = (): void => {\r\n\t\t\tif (raf) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\traf = window.requestAnimationFrame(() => {\r\n\t\t\t\traf = null;\r\n\t\t\t\tconst shouldStick = window.pageYOffset + headerOffset >= originalTop;\r\n\t\t\t\tsetStuck(shouldStick);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Debounce resize handler\r\n\t\tlet resizeTimeout: number | null = null;\r\n\t\tconst onResize = (): void => {\r\n\t\t\tif (resizeTimeout !== null) {\r\n\t\t\t\tclearTimeout(resizeTimeout);\r\n\t\t\t}\r\n\t\t\tresizeTimeout = window.setTimeout(() => {\r\n\t\t\t\tif (raf) {\r\n\t\t\t\t\twindow.cancelAnimationFrame(raf);\r\n\t\t\t\t}\r\n\t\t\t\traf = window.requestAnimationFrame(() => {\r\n\t\t\t\t\traf = null;\r\n\t\t\t\t\trect = wrapper.getBoundingClientRect();\r\n\t\t\t\t\toriginalLeft = rect.left;\r\n\t\t\t\t\toriginalWidth = rect.width;\r\n\r\n\t\t\t\t\tconst w = dataMax > 0 ? Math.min(originalWidth, dataMax) : originalWidth;\r\n\r\n\t\t\t\t\tph.style.width = `${w}px`;\r\n\t\t\t\t\tph.style.height = `${rect.height}px`;\r\n\r\n\t\t\t\t\tif (isStuck) {\r\n\t\t\t\t\t\tconst h = availHeight();\r\n\t\t\t\t\t\tapplyStickyStyles(\r\n\t\t\t\t\t\t\twrapper,\r\n\t\t\t\t\t\t\ttoc,\r\n\t\t\t\t\t\t\tph,\r\n\t\t\t\t\t\t\tcalcLeft(w),\r\n\t\t\t\t\t\t\tw,\r\n\t\t\t\t\t\t\th,\r\n\t\t\t\t\t\t\theaderOffset,\r\n\t\t\t\t\t\t\trect.height,\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, 150); // 150ms debounce\r\n\t\t};\r\n\r\n\t\twindow.addEventListener('scroll', onScroll, { passive: true });\r\n\t\twindow.addEventListener('resize', onResize);\r\n\t\tonScroll(); // initial determination.\r\n\t});\r\n}\r\n","// modules/toc/ts/toc-toggle.ts\r\n\r\n/**\r\n * Handles click events on TOC toggle buttons.\r\n */\r\nexport function initTocToggle(): void {\r\n\tdocument.addEventListener('click', (e) => {\r\n\t\tconst btn = (e.target as HTMLElement).closest('.nuclen-toc-toggle');\r\n\t\tif (!btn) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst navId = btn.getAttribute('aria-controls');\r\n\t\tconst nav = navId ? document.getElementById(navId) : null;\r\n\t\tconst expanded = btn.getAttribute('aria-expanded') === 'true';\r\n\t\tbtn.setAttribute('aria-expanded', expanded ? 'false' : 'true');\r\n\t\tif (nav) {\r\n\t\t\tnav.style.display = expanded ? 'none' : '';\r\n\t\t}\r\n\t\t// @ts-expect-error defined via wp_localize_script\r\n\t\tconst l10n = window.nuclenTocL10n as { show: string; hide: string };\r\n\t\tbtn.textContent = expanded ? l10n.show : l10n.hide;\r\n\t});\r\n}\r\n","// modules/toc/ts/toc-click-close.ts\r\n\r\n/**\r\n * Closes the open TOC when clicking a link or outside the sticky container.\r\n */\r\nexport function initClickToClose(): void {\r\n\tdocument.addEventListener('click', (e) => {\r\n\t\tconst link = (e.target as HTMLElement).closest('.nuclen-toc a');\r\n\t\tconst wrapper = link ? link.closest('.nuclen-toc-sticky') : null;\r\n\t\tif (!link || !wrapper) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst btn = wrapper!.querySelector<HTMLElement>(\r\n\t\t\t\t'.nuclen-toc-toggle[aria-expanded=\"true\"]',\r\n\t\t\t);\r\n\t\t\tif (btn) {\r\n\t\t\t\tbtn.click();\r\n\t\t\t}\r\n\t\t}, 120);\r\n\t});\r\n\r\n\tdocument.addEventListener('click', (e) => {\r\n\t\tconst stuck = document.querySelector<HTMLElement>(\r\n\t\t\t'.nuclen-toc-sticky.nuclen-toc-stuck',\r\n\t\t);\r\n\t\tif (!stuck) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst target = e.target as HTMLElement;\r\n\t\tif (!stuck.contains(target) && !target.closest('.nuclen-toc-toggle')) {\r\n\t\t\tconst btn = stuck.querySelector<HTMLElement>(\r\n\t\t\t\t'.nuclen-toc-toggle[aria-expanded=\"true\"]',\r\n\t\t\t);\r\n\t\t\tif (btn) {\r\n\t\t\t\tbtn.click();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n","// modules/toc/ts/toc-scroll-spy.ts\r\n\r\n/**\r\n * Highlights TOC links based on scroll position.\r\n */\r\nexport function initScrollSpy(): void {\r\n\tconst navs = document.querySelectorAll<HTMLElement>(\r\n\t\t'.nuclen-toc[data-highlight=\"true\"]',\r\n\t);\r\n\tif (!navs.length || !('IntersectionObserver' in window)) {\r\n\t\treturn;\r\n\t}\r\n\tconst ioOpts: IntersectionObserverInit = { rootMargin: '0px 0px -60%', threshold: 0 };\r\n\r\n\tnavs.forEach((nav) => {\r\n\t\tconst map = new Map<Element, HTMLAnchorElement>();\r\n\t\tnav.querySelectorAll<HTMLAnchorElement>('a[href^=\"#\"]').forEach((a) => {\r\n\t\t\tconst id = a.getAttribute('href')!.slice(1);\r\n\t\t\tconst tgt = id && document.getElementById(id);\r\n\t\t\tif (tgt) map.set(tgt, a);\r\n\t\t});\r\n\t\tif (!map.size) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst io = new IntersectionObserver((entries) => {\r\n\t\t\tentries.forEach((en) => {\r\n\t\t\t\tconst link = map.get(en.target);\r\n\t\t\t\tif (!link) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (en.isIntersecting) {\r\n\t\t\t\t\tnav.querySelectorAll<HTMLAnchorElement>('a.is-active').forEach((el) => {\r\n\t\t\t\t\t\tel.classList.remove('is-active');\r\n\t\t\t\t\t\tel.removeAttribute('aria-current');\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlink.classList.add('is-active');\r\n\t\t\t\t\tlink.setAttribute('aria-current', 'location');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, ioOpts);\r\n\t\tmap.forEach((_l, tgt) => io.observe(tgt));\r\n\t});\r\n}\r\n","declare const gtag: (command: string, eventName: string, parameters?: any) => void;\n\nexport class TocAnalytics {\n    private tocNav: HTMLElement;\n    private toggleButton: HTMLButtonElement | null;\n    private hasViewEventFired: boolean = false;\n\n    constructor(tocWrapper: HTMLElement) {\n        this.tocNav = tocWrapper.querySelector('.nuclen-toc') as HTMLElement;\n        this.toggleButton = tocWrapper.querySelector('.nuclen-toc-toggle') as HTMLButtonElement | null;\n\n        if (!this.tocNav) {\n            return;\n        }\n\n        this.init();\n    }\n\n    private init(): void {\n        this.setupViewTracking();\n        this.setupClickTracking();\n        this.setupToggleTracking();\n    }\n\n    private setupViewTracking(): void {\n        const observer = new IntersectionObserver(\n            (entries) => {\n                entries.forEach(entry => {\n                    if (entry.isIntersecting && entry.intersectionRatio >= 0.8 && !this.hasViewEventFired) {\n                        this.hasViewEventFired = true;\n                        gtag('event', 'nuclen_toc_view', {\n                            event_category: 'TOC',\n                            event_label: 'TOC fully visible',\n                            value: window.location.pathname\n                        });\n                    }\n                });\n            },\n            {\n                threshold: 0.8\n            }\n        );\n\n        observer.observe(this.tocNav);\n    }\n\n    private setupClickTracking(): void {\n        const links = this.tocNav.querySelectorAll('a');\n        \n        links.forEach(link => {\n            link.addEventListener('click', (event) => {\n                const target = event.currentTarget as HTMLAnchorElement;\n                const linkText = target.textContent?.trim() || '';\n                const href = target.getAttribute('href') || '';\n\n                gtag('event', 'nuclen_toc_click', {\n                    event_category: 'TOC',\n                    event_label: linkText,\n                    value: href\n                });\n            });\n        });\n    }\n\n    private setupToggleTracking(): void {\n        if (!this.toggleButton) {\n            return;\n        }\n\n        this.toggleButton.addEventListener('click', () => {\n            const isExpanded = this.toggleButton!.getAttribute('aria-expanded');\n            const action = isExpanded === 'true' ? 'hide' : 'show';\n\n            gtag('event', 'nuclen_toc_toggle', {\n                event_category: 'TOC',\n                event_label: action\n            });\n        });\n    }\n}","// modules/toc/ts/toc-interactions.ts\r\n\r\n/**\r\n * Composes TOC behaviours like toggle buttons and scroll‑spy highlighting.\r\n */\r\nimport { initTocToggle } from './toc-toggle';\r\nimport { initClickToClose } from './toc-click-close';\r\nimport { initScrollSpy } from './toc-scroll-spy';\r\nimport { TocAnalytics } from './toc-analytics';\r\n\r\nexport function initTocInteractions(): void {\r\n\tinitTocToggle();\r\n\tinitClickToClose();\r\n\tinitScrollSpy();\r\n\t\r\n\t// Initialize analytics tracking for each TOC\r\n\tconst tocWrappers = document.querySelectorAll('.nuclen-toc-wrapper');\r\n\ttocWrappers.forEach(wrapper => {\r\n\t\tnew TocAnalytics(wrapper as HTMLElement);\r\n\t});\r\n}\r\n\r\nexport { initTocToggle, initClickToClose, initScrollSpy };\r\n","// modules/toc/ts/nuclen-toc-front.ts\r\n\r\n/**\r\n * Public behaviour for the TOC shortcode.\r\n * Handles sticky sidebar, toggle buttons and scroll‑spy highlighting.\r\n */\r\n\r\nimport { initStickyToc } from './sticky-toc';\r\nimport { initTocInteractions } from './toc-interactions';\r\n\r\nexport { initStickyToc, initTocInteractions };\r\n\r\n// Boot\r\nif (document.readyState === 'loading') {\r\n\tdocument.addEventListener('DOMContentLoaded', () => {\r\n\t\tinitStickyToc();\r\n\t\tinitTocInteractions();\r\n\t});\r\n} else {\r\n\tinitStickyToc();\r\n\tinitTocInteractions();\r\n}\r\n"],"names":["applyStickyStyles","wrapper","toc","placeholder","left","width","height","headerOffset","rectHeight","clearStickyStyles","initStickyToc","wrappers","sideMargin","rect","originalTop","originalLeft","originalWidth","isStuck","raf","dataMax","ph","calcLeft","w","container","contLeft","min","max","availHeight","setStuck","stick","h","onScroll","shouldStick","resizeTimeout","onResize","initTocToggle","e","btn","navId","nav","expanded","l10n","initClickToClose","link","stuck","target","initScrollSpy","navs","ioOpts","map","a","id","tgt","io","entries","en","el","_l","TocAnalytics","tocWrapper","__publicField","entry","event","_a","linkText","href","action","initTocInteractions"],"mappings":"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"}