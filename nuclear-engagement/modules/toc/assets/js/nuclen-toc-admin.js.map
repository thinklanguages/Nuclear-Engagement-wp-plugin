{"version":3,"file":"nuclen-toc-admin.js","sources":["../../../../../src/modules/toc/ts/nuclen-toc-admin.ts"],"sourcesContent":["// modules/toc/ts/nuclen-toc-admin.ts\n\n/**\n * Admin page shortcode generator logic.\n * Builds a live shortcode preview and copies it to the clipboard.\n */\n\ndeclare const nuclenTocAdmin: { copy: string; done: string };\n\nconst $ = (id: string): HTMLElement => {\n\tconst el = document.getElementById(id);\n\tif (!el) {\n\t\tthrow new Error(`Missing element: ${id}`);\n\t}\n\treturn el;\n};\n\nconst f = {\n\tmin: $('nuclen-min') as HTMLSelectElement,\n\tmax: $('nuclen-max') as HTMLSelectElement,\n\tlist: $('nuclen-list') as HTMLSelectElement,\n\ttitle: $('nuclen-title') as HTMLInputElement,\n\ttog: $('nuclen-tog') as HTMLInputElement,\n\tcol: $('nuclen-col') as HTMLInputElement,\n\tsmo: $('nuclen-smo') as HTMLInputElement,\n\thil: $('nuclen-hil') as HTMLInputElement,\n\toff: $('nuclen-off') as HTMLInputElement,\n};\n\nconst out = $('nuclen-shortcode-preview');\nconst btn = $('nuclen-copy');\n\nfunction build(): void {\n\tlet sc = '[simple_toc';\n\n\tif (f.min.value && f.min.value !== '2') {\n\t\tsc += ` min_level=\"${f.min.value}\"`;\n\t}\n\tif (f.max.value && f.max.value !== '6') {\n\t\tsc += ` max_level=\"${f.max.value}\"`;\n\t}\n\tif (f.list.value && f.list.value !== 'ul') {\n\t\tsc += ` list=\"${f.list.value}\"`;\n\t}\n\n\tconst t = f.title.value.trim();\n\tif (t) {\n\t\tsc += ` title=\"${t.replace(/\"/g, '&quot;')}\"`;\n\t}\n\n\tif (!f.tog.checked) {\n\t\tsc += ' toggle=\"false\"';\n\t}\n\tif (f.col.checked) {\n\t\tsc += ' collapsed=\"true\"';\n\t}\n\tif (!f.smo.checked) {\n\t\tsc += ' smooth=\"false\"';\n\t}\n\tif (!f.hil.checked) {\n\t\tsc += ' highlight=\"false\"';\n\t}\n\tif (f.off.value && f.off.value !== '72') {\n\t\tsc += ` offset=\"${f.off.value}\"`;\n\t}\n\n\tsc += ']';\n\tout.textContent = sc;\n}\n\nObject.values(f).forEach((el) => {\n\tel.addEventListener(el.type === 'checkbox' ? 'change' : 'input', build);\n});\nbuild();\n\nbtn.addEventListener('click', () => {\n\tnavigator.clipboard.writeText(out.textContent || '').then(() => {\n\t\tbtn.textContent = nuclenTocAdmin.done;\n\t\tsetTimeout(() => {\n\t\t\tbtn.textContent = nuclenTocAdmin.copy;\n\t\t}, 2000);\n\t});\n});\n"],"names":["$","id","el","f","out","btn","build","sc","t"],"mappings":"AASA,MAAMA,EAAKC,GAA4B,CACtC,MAAMC,EAAK,SAAS,eAAeD,CAAE,EACrC,GAAI,CAACC,EACJ,MAAM,IAAI,MAAM,oBAAoBD,CAAE,EAAE,EAEzC,OAAOC,CACR,EAEMC,EAAI,CACT,IAAKH,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,EACnB,KAAMA,EAAE,aAAa,EACrB,MAAOA,EAAE,cAAc,EACvB,IAAKA,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,CACpB,EAEMI,EAAMJ,EAAE,0BAA0B,EAClCK,EAAML,EAAE,aAAa,EAE3B,SAASM,GAAc,CACtB,IAAIC,EAAK,cAELJ,EAAE,IAAI,OAASA,EAAE,IAAI,QAAU,MAClCI,GAAM,eAAeJ,EAAE,IAAI,KAAK,KAE7BA,EAAE,IAAI,OAASA,EAAE,IAAI,QAAU,MAClCI,GAAM,eAAeJ,EAAE,IAAI,KAAK,KAE7BA,EAAE,KAAK,OAASA,EAAE,KAAK,QAAU,OACpCI,GAAM,UAAUJ,EAAE,KAAK,KAAK,KAG7B,MAAMK,EAAIL,EAAE,MAAM,MAAM,KAAA,EACpBK,IACHD,GAAM,WAAWC,EAAE,QAAQ,KAAM,QAAQ,CAAC,KAGtCL,EAAE,IAAI,UACVI,GAAM,mBAEHJ,EAAE,IAAI,UACTI,GAAM,qBAEFJ,EAAE,IAAI,UACVI,GAAM,mBAEFJ,EAAE,IAAI,UACVI,GAAM,sBAEHJ,EAAE,IAAI,OAASA,EAAE,IAAI,QAAU,OAClCI,GAAM,YAAYJ,EAAE,IAAI,KAAK,KAG9BI,GAAM,IACNH,EAAI,YAAcG,CACnB,CAEA,OAAO,OAAOJ,CAAC,EAAE,QAASD,GAAO,CAChCA,EAAG,iBAAiBA,EAAG,OAAS,WAAa,SAAW,QAASI,CAAK,CACvE,CAAC,EACDA,EAAA,EAEAD,EAAI,iBAAiB,QAAS,IAAM,CACnC,UAAU,UAAU,UAAUD,EAAI,aAAe,EAAE,EAAE,KAAK,IAAM,CAC/DC,EAAI,YAAc,eAAe,KACjC,WAAW,IAAM,CAChBA,EAAI,YAAc,eAAe,IAAA,EAC/B,GAAI,CAAA,CACP,CACF,CAAC"}