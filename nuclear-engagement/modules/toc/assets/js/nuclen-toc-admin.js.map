{"version":3,"file":"nuclen-toc-admin.js","sources":["../../../../../src/modules/toc/ts/nuclen-toc-admin.ts"],"sourcesContent":["// modules/toc/ts/nuclen-toc-admin.ts\r\n\r\n/**\r\n * Admin page shortcode generator logic.\r\n * Builds a live shortcode preview and copies it to the clipboard.\r\n */\r\n\r\ndeclare const nuclenTocAdmin: { copy: string; done: string };\r\n\r\nconst $ = (id: string): HTMLElement => {\r\n\tconst el = document.getElementById(id);\r\n\tif (!el) {\r\n\t\tthrow new Error(`Missing element: ${id}`);\r\n\t}\r\n\treturn el;\r\n};\r\n\r\nconst f = {\r\n\tmin: $('nuclen-min') as HTMLSelectElement,\r\n\tmax: $('nuclen-max') as HTMLSelectElement,\r\n\tlist: $('nuclen-list') as HTMLSelectElement,\r\n\ttitle: $('nuclen-title') as HTMLInputElement,\r\n\ttog: $('nuclen-tog') as HTMLInputElement,\r\n\tcol: $('nuclen-col') as HTMLInputElement,\r\n\tsmo: $('nuclen-smo') as HTMLInputElement,\r\n\thil: $('nuclen-hil') as HTMLInputElement,\r\n\toff: $('nuclen-off') as HTMLInputElement,\r\n};\r\n\r\nconst out = $('nuclen-shortcode-preview');\r\nconst btn = $('nuclen-copy');\r\n\r\nfunction build(): void {\r\n\tlet sc = '[simple_toc';\r\n\r\n\tif (f.min.value && f.min.value !== '2') {\r\n\t\tsc += ` min_level=\"${f.min.value}\"`;\r\n\t}\r\n\tif (f.max.value && f.max.value !== '6') {\r\n\t\tsc += ` max_level=\"${f.max.value}\"`;\r\n\t}\r\n\tif (f.list.value && f.list.value !== 'ul') {\r\n\t\tsc += ` list=\"${f.list.value}\"`;\r\n\t}\r\n\r\n\tconst t = f.title.value.trim();\r\n\tif (t) {\r\n\t\tsc += ` title=\"${t.replace(/\"/g, '&quot;')}\"`;\r\n\t}\r\n\r\n\tif (!f.tog.checked) {\r\n\t\tsc += ' toggle=\"false\"';\r\n\t}\r\n\tif (f.col.checked) {\r\n\t\tsc += ' collapsed=\"true\"';\r\n\t}\r\n\tif (!f.smo.checked) {\r\n\t\tsc += ' smooth=\"false\"';\r\n\t}\r\n\tif (!f.hil.checked) {\r\n\t\tsc += ' highlight=\"false\"';\r\n\t}\r\n\tif (f.off.value && f.off.value !== '72') {\r\n\t\tsc += ` offset=\"${f.off.value}\"`;\r\n\t}\r\n\r\n\tsc += ']';\r\n\tout.textContent = sc;\r\n}\r\n\r\nObject.values(f).forEach((el) => {\r\n\tel.addEventListener(el.type === 'checkbox' ? 'change' : 'input', build);\r\n});\r\nbuild();\r\n\r\nbtn.addEventListener('click', () => {\r\n\tnavigator.clipboard.writeText(out.textContent || '').then(() => {\r\n\t\tbtn.textContent = nuclenTocAdmin.done;\r\n\t\tsetTimeout(() => {\r\n\t\t\tbtn.textContent = nuclenTocAdmin.copy;\r\n\t\t}, 2000);\r\n\t});\r\n});\r\n"],"names":["$","id","el","f","out","btn","build","sc","t"],"mappings":"AASA,MAAMA,EAAKC,GAA4B,CACtC,MAAMC,EAAK,SAAS,eAAeD,CAAE,EACrC,GAAI,CAACC,EACJ,MAAM,IAAI,MAAM,oBAAoBD,CAAE,EAAE,EAEzC,OAAOC,CACR,EAEMC,EAAI,CACT,IAAKH,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,EACnB,KAAMA,EAAE,aAAa,EACrB,MAAOA,EAAE,cAAc,EACvB,IAAKA,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,EACnB,IAAKA,EAAE,YAAY,CACpB,EAEMI,EAAMJ,EAAE,0BAA0B,EAClCK,EAAML,EAAE,aAAa,EAE3B,SAASM,GAAc,CACtB,IAAIC,EAAK,cAELJ,EAAE,IAAI,OAASA,EAAE,IAAI,QAAU,MAClCI,GAAM,eAAeJ,EAAE,IAAI,KAAK,KAE7BA,EAAE,IAAI,OAASA,EAAE,IAAI,QAAU,MAClCI,GAAM,eAAeJ,EAAE,IAAI,KAAK,KAE7BA,EAAE,KAAK,OAASA,EAAE,KAAK,QAAU,OACpCI,GAAM,UAAUJ,EAAE,KAAK,KAAK,KAG7B,MAAMK,EAAIL,EAAE,MAAM,MAAM,KAAA,EACpBK,IACHD,GAAM,WAAWC,EAAE,QAAQ,KAAM,QAAQ,CAAC,KAGtCL,EAAE,IAAI,UACVI,GAAM,mBAEHJ,EAAE,IAAI,UACTI,GAAM,qBAEFJ,EAAE,IAAI,UACVI,GAAM,mBAEFJ,EAAE,IAAI,UACVI,GAAM,sBAEHJ,EAAE,IAAI,OAASA,EAAE,IAAI,QAAU,OAClCI,GAAM,YAAYJ,EAAE,IAAI,KAAK,KAG9BI,GAAM,IACNH,EAAI,YAAcG,CACnB,CAEA,OAAO,OAAOJ,CAAC,EAAE,QAASD,GAAO,CAChCA,EAAG,iBAAiBA,EAAG,OAAS,WAAa,SAAW,QAASI,CAAK,CACvE,CAAC,EACDA,EAAA,EAEAD,EAAI,iBAAiB,QAAS,IAAM,CACnC,UAAU,UAAU,UAAUD,EAAI,aAAe,EAAE,EAAE,KAAK,IAAM,CAC/DC,EAAI,YAAc,eAAe,KACjC,WAAW,IAAM,CAChBA,EAAI,YAAc,eAAe,IAAA,EAC/B,GAAI,CAAA,CACP,CACF,CAAC"}